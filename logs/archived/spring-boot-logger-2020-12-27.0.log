2020-12-27 11:27:39,667 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootApplicationAflcv on antonioPortatil with PID 23540 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 11:27:39,677 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 11:27:39,679 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 11:27:39,789 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 11:27:39,790 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 11:27:39,791 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 11:27:41,198 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 11:27:41,393 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 176ms. Found 5 JPA repository interfaces.
2020-12-27 11:27:42,221 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 11:27:42,269 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 11:27:42,277 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 11:27:42,283 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@2bca5ace' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 11:27:42,286 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 11:27:42,298 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 11:27:43,543 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 11:27:43,562 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 11:27:43,563 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 11:27:43,564 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 11:27:43,773 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 11:27:43,773 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 3982 ms
2020-12-27 11:27:44,146 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 11:27:44,286 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 11:27:44,558 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 11:27:44,735 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 11:27:45,027 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 11:27:45,057 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 11:27:46,360 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 11:27:46,366 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 11:27:46,368 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 11:27:46,369 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 11:27:46,370 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 11:27:46,372 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 11:27:46,383 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 11:27:46,388 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 11:27:46,395 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 11:27:46,402 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 11:27:46,406 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 11:27:46,411 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 11:27:46,422 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 11:27:46,429 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 11:27:46,447 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 11:27:46,455 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 11:27:46,468 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 11:27:46,479 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 11:27:46,482 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 11:27:46,489 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 11:27:46,502 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 11:27:46,504 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 11:27:46,509 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 11:27:46,513 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 11:27:46,517 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 11:27:46,521 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 11:27:46,525 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 11:27:46,530 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 11:27:46,535 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 11:27:46,540 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 11:27:46,545 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 11:27:46,553 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 11:27:46,559 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 11:27:46,562 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 11:27:46,568 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 11:27:46,578 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 11:27:46,579 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 11:27:46,582 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 11:27:46,585 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 11:27:46,595 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 11:27:46,623 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 11:27:46,683 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 11:27:47,799 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 11:27:48,472 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 11:27:48,516 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 11:27:49,684 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@acefb10, org.springframework.security.web.context.SecurityContextPersistenceFilter@57170f1a, org.springframework.security.web.header.HeaderWriterFilter@5aaa50f2, org.springframework.security.web.authentication.logout.LogoutFilter@1c4446d1, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2e783f0d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@714d0ac2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@637d7654, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4dd6dc77, org.springframework.security.web.session.SessionManagementFilter@43edcfd9, org.springframework.security.web.access.ExceptionTranslationFilter@37c3b446, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3af76acb]
2020-12-27 11:27:49,710 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@52f214be, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@e728273, org.springframework.security.web.context.SecurityContextPersistenceFilter@6f17f98c, org.springframework.security.web.header.HeaderWriterFilter@24047d32, org.springframework.web.filter.CorsFilter@197becf6, org.springframework.security.web.authentication.logout.LogoutFilter@369a7b2c, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@717cd556, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6464354, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1ac4343, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@e7c5412, org.springframework.security.web.session.SessionManagementFilter@1a7fa4b1, org.springframework.security.web.access.ExceptionTranslationFilter@400527b5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6a4fbbf0]
2020-12-27 11:27:49,717 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2cef4678, org.springframework.security.web.context.SecurityContextPersistenceFilter@18f0d018, org.springframework.security.web.header.HeaderWriterFilter@6bbbc3be, org.springframework.security.web.authentication.logout.LogoutFilter@f48557b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@ee7703d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3bf4e46c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d6a7967, org.springframework.security.web.session.SessionManagementFilter@515f64f9, org.springframework.security.web.access.ExceptionTranslationFilter@3d556a99, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4b420735]
2020-12-27 11:27:49,877 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 11:27:49,911 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 11:27:49,915 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootApplicationAflcv in 11.05 seconds (JVM running for 11.895)
2020-12-27 11:38:11,597 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-27 11:38:11,598 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2020-12-27 11:38:11,614 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 15 ms
2020-12-27 11:38:12,012 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 11:38:12,127 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 11:38:12,163 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios_roles (usuario_id, role_id) values (?, ?)
2020-12-27 11:39:07,072 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.cod_activacion=?
2020-12-27 11:39:07,111 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] update usuarios set acepta_emails=?, apellidos=?, cod_activacion=?, cod_cambio_passw=?, email=?, enabled=?, esperando_cambio_passw=?, fecha_activado=?, fecha_registro=?, fecha_sol_cambio_passw=?, finalizada_activacion=?, nombre=?, password=?, telefono=?, username=? where id=?
2020-12-27 11:39:07,116 DEBUG com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-3] [usuario activadoo, ok]
2020-12-27 12:39:36,942 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootApplicationAflcv on antonioPortatil with PID 16236 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 12:39:36,949 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 12:39:36,951 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 12:39:37,176 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 12:39:37,179 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 12:39:37,179 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 12:39:39,236 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 12:39:39,488 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 221ms. Found 5 JPA repository interfaces.
2020-12-27 12:39:40,725 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 12:39:40,801 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 12:39:40,806 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 12:39:40,810 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7b433a26' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 12:39:40,815 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 12:39:40,824 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 12:39:42,320 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 12:39:42,347 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 12:39:42,349 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 12:39:42,350 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 12:39:42,620 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 12:39:42,621 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 5442 ms
2020-12-27 12:39:43,090 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 12:39:43,319 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 12:39:43,726 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 12:39:44,025 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 12:39:44,279 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 12:39:44,325 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 12:39:46,515 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 12:39:46,520 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 12:39:46,521 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 12:39:46,523 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 12:39:46,524 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 12:39:46,525 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 12:39:46,536 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 12:39:46,542 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 12:39:46,549 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 12:39:46,556 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 12:39:46,560 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 12:39:46,565 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 12:39:46,577 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 12:39:46,585 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 12:39:46,601 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 12:39:46,611 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 12:39:46,623 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 12:39:46,633 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 12:39:46,636 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 12:39:46,642 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 12:39:46,657 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 12:39:46,660 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 12:39:46,664 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 12:39:46,670 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 12:39:46,674 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 12:39:46,678 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 12:39:46,682 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 12:39:46,687 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 12:39:46,691 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 12:39:46,698 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 12:39:46,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 12:39:46,710 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 12:39:46,717 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 12:39:46,720 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 12:39:46,726 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 12:39:46,737 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 12:39:46,738 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 12:39:46,741 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 12:39:46,746 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 12:39:46,762 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 12:39:46,797 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 12:39:46,894 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 12:40:02,980 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 12:40:03,569 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 12:40:03,649 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 12:40:05,204 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@302d3bf7, org.springframework.security.web.context.SecurityContextPersistenceFilter@5e0d1996, org.springframework.security.web.header.HeaderWriterFilter@c56f889, org.springframework.security.web.authentication.logout.LogoutFilter@6ac88ede, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4e4a87cd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@65c7664a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1fe68ac8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@63518d69, org.springframework.security.web.session.SessionManagementFilter@34d2da67, org.springframework.security.web.access.ExceptionTranslationFilter@42f77d88, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@41122fb8]
2020-12-27 12:40:05,237 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@3c912921, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6871ab70, org.springframework.security.web.context.SecurityContextPersistenceFilter@13f077b1, org.springframework.security.web.header.HeaderWriterFilter@4b80b5a7, org.springframework.web.filter.CorsFilter@5be8cc5f, org.springframework.security.web.authentication.logout.LogoutFilter@2593fc5f, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@2d2e7335, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@d3ac54b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@435974c6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d025e67, org.springframework.security.web.session.SessionManagementFilter@2ccb5540, org.springframework.security.web.access.ExceptionTranslationFilter@2177e460, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6f972560]
2020-12-27 12:40:05,243 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@19db31a9, org.springframework.security.web.context.SecurityContextPersistenceFilter@11ffe558, org.springframework.security.web.header.HeaderWriterFilter@2944f7b6, org.springframework.security.web.authentication.logout.LogoutFilter@32388d4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4ab3e988, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@44c44e2f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7b594d54, org.springframework.security.web.session.SessionManagementFilter@19061e7b, org.springframework.security.web.access.ExceptionTranslationFilter@3adc2976, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1be9a49]
2020-12-27 12:40:05,433 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 12:40:05,497 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 12:40:05,502 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootApplicationAflcv in 29.826 seconds (JVM running for 31.314)
2020-12-27 12:41:22,910 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-27 12:41:22,912 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2020-12-27 12:41:22,942 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 28 ms
2020-12-27 12:42:03,557 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 12:42:03,557 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 12:42:03,708 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 12:42:03,712 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 12:42:03,759 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios_roles (usuario_id, role_id) values (?, ?)
2020-12-27 12:42:03,804 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-8080-exec-4] SQL Error: 0, SQLState: 23505
2020-12-27 12:42:03,805 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-8080-exec-4] ERROR: llave duplicada viola restricción de unicidad «uk_m2dvbwfge291euvmk6vkkocao»
  Detail: Ya existe la llave (username)=(antonio63j@hotmail.com).
2020-12-27 12:42:03,820 DEBUG com.afl.restaurante.controllers.UsuarioController [http-nio-8080-exec-4] Error en registro de usuario null,could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement: ERROR: llave duplicada viola restricción de unicidad «uk_m2dvbwfge291euvmk6vkkocao»
  Detail: Ya existe la llave (username)=(antonio63j@hotmail.com).
2020-12-27 12:42:30,306 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.cod_activacion=?
2020-12-27 12:42:30,356 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] update usuarios set acepta_emails=?, apellidos=?, cod_activacion=?, cod_cambio_passw=?, email=?, enabled=?, esperando_cambio_passw=?, fecha_activado=?, fecha_registro=?, fecha_sol_cambio_passw=?, finalizada_activacion=?, nombre=?, password=?, telefono=?, username=? where id=?
2020-12-27 12:42:30,367 DEBUG com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-5] [usuario activadoo, ok]
2020-12-27 13:14:15,609 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootApplicationAflcv on antonioPortatil with PID 22220 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 13:14:15,616 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 13:14:15,617 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 13:14:15,853 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 13:14:15,854 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 13:14:15,854 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 13:14:17,804 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 13:14:18,054 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 217ms. Found 5 JPA repository interfaces.
2020-12-27 13:14:19,229 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 13:14:19,296 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 13:14:19,305 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 13:14:19,309 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@66e7226f' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 13:14:19,312 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 13:14:19,324 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 13:14:21,113 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 13:14:21,139 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 13:14:21,141 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 13:14:21,142 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 13:14:21,377 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 13:14:21,378 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 5523 ms
2020-12-27 13:14:21,831 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 13:14:22,068 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 13:14:22,502 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 13:14:22,814 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 13:14:23,063 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 13:14:23,104 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 13:14:24,853 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 13:14:24,858 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 13:14:24,860 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 13:14:24,862 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 13:14:24,864 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 13:14:24,866 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 13:14:24,880 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 13:14:24,885 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 13:14:24,893 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 13:14:24,900 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 13:14:24,903 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 13:14:24,911 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 13:14:24,924 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 13:14:24,934 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 13:14:24,952 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 13:14:24,963 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 13:14:24,974 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 13:14:24,986 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 13:14:24,988 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 13:14:24,995 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 13:14:25,008 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 13:14:25,011 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 13:14:25,016 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 13:14:25,022 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 13:14:25,026 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 13:14:25,031 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 13:14:25,034 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 13:14:25,038 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 13:14:25,046 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 13:14:25,051 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 13:14:25,055 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 13:14:25,063 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 13:14:25,069 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 13:14:25,072 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 13:14:25,079 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 13:14:25,091 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 13:14:25,092 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 13:14:25,095 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 13:14:25,100 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 13:14:25,114 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 13:14:25,154 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 13:14:25,313 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 13:14:38,155 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 13:14:38,733 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 13:14:38,803 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 13:14:40,423 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5651f4ac, org.springframework.security.web.context.SecurityContextPersistenceFilter@19cf3ff5, org.springframework.security.web.header.HeaderWriterFilter@511ba346, org.springframework.security.web.authentication.logout.LogoutFilter@50be66ed, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2ada1e80, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@76cb627a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@23f76116, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3643365f, org.springframework.security.web.session.SessionManagementFilter@57d7c66c, org.springframework.security.web.access.ExceptionTranslationFilter@2b93e1da, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3d19ed48]
2020-12-27 13:14:40,458 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@58ad5da4, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@76d2091c, org.springframework.security.web.context.SecurityContextPersistenceFilter@7d693783, org.springframework.security.web.header.HeaderWriterFilter@16a4560c, org.springframework.web.filter.CorsFilter@368452c3, org.springframework.security.web.authentication.logout.LogoutFilter@3ef86a8e, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@7865642, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@617dc3a3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@555dedb6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5dccc3c5, org.springframework.security.web.session.SessionManagementFilter@40b3f511, org.springframework.security.web.access.ExceptionTranslationFilter@241713ee, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6e00a462]
2020-12-27 13:14:40,475 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@49231e92, org.springframework.security.web.context.SecurityContextPersistenceFilter@59bf5f10, org.springframework.security.web.header.HeaderWriterFilter@516ba90c, org.springframework.security.web.authentication.logout.LogoutFilter@73c0313a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1c6a0709, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@10c5ee41, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7a64d75a, org.springframework.security.web.session.SessionManagementFilter@5ed3ce46, org.springframework.security.web.access.ExceptionTranslationFilter@18cbbb7d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@723c270]
2020-12-27 13:14:40,664 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 13:14:40,756 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 13:14:40,781 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootApplicationAflcv in 26.361 seconds (JVM running for 27.761)
2020-12-27 13:15:05,514 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-27 13:15:05,514 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2020-12-27 13:15:05,531 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 16 ms
2020-12-27 13:15:50,832 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 13:15:50,832 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 13:15:50,983 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 13:15:51,001 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 13:15:51,046 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios_roles (usuario_id, role_id) values (?, ?)
2020-12-27 13:15:51,088 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-8080-exec-4] SQL Error: 0, SQLState: 23505
2020-12-27 13:15:51,090 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper [http-nio-8080-exec-4] ERROR: llave duplicada viola restricción de unicidad «uk_m2dvbwfge291euvmk6vkkocao»
  Detail: Ya existe la llave (username)=(antonio63j@hotmail.com).
2020-12-27 13:15:51,104 DEBUG com.afl.restaurante.controllers.UsuarioController [http-nio-8080-exec-4] Error en registro de usuario null,could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement: ERROR: llave duplicada viola restricción de unicidad «uk_m2dvbwfge291euvmk6vkkocao»
  Detail: Ya existe la llave (username)=(antonio63j@hotmail.com).
2020-12-27 13:16:15,238 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-6] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 13:16:15,245 DEBUG com.afl.restaurante.controllers.UsuarioController [http-nio-8080-exec-6] Error en registro de usuario antonio63j@hotmail.com,antonio63j@hotmail.com ya ha sido utilizado
2020-12-27 13:17:10,291 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-8] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.cod_activacion=?
2020-12-27 13:17:10,313 ERROR org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-8] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException: null
	at com.afl.restaurante.controllers.UsuarioControlerMvc.activacionCuenta(UsuarioControlerMvc.java:76)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:888)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:634)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:126)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:90)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:118)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:158)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter.doFilter(OAuth2AuthenticationProcessingFilter.java:176)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:92)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:77)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:92)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:526)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:860)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1591)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Unknown Source)
2020-12-27 14:35:47,943 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootApplicationAflcv on antonioPortatil with PID 25516 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 14:35:47,950 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 14:35:47,951 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 14:35:48,072 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 14:35:48,073 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 14:35:48,074 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 14:35:49,569 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 14:35:49,760 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 170ms. Found 5 JPA repository interfaces.
2020-12-27 14:35:50,675 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:35:50,743 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:35:50,751 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:35:50,757 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@45263bb9' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:35:50,759 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:35:50,770 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:35:52,009 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 14:35:52,032 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 14:35:52,033 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 14:35:52,034 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 14:35:52,241 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 14:35:52,242 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 4168 ms
2020-12-27 14:35:52,585 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 14:35:52,750 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 14:35:52,984 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 14:35:53,122 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 14:35:53,313 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 14:35:53,343 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 14:35:54,711 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 14:35:54,716 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 14:35:54,718 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 14:35:54,719 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 14:35:54,720 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 14:35:54,722 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 14:35:54,734 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 14:35:54,739 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 14:35:54,746 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 14:35:54,753 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 14:35:54,756 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 14:35:54,761 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 14:35:54,771 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 14:35:54,778 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 14:35:54,791 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 14:35:54,800 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 14:35:54,810 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 14:35:54,824 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 14:35:54,827 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 14:35:54,834 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 14:35:54,845 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 14:35:54,849 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 14:35:54,854 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 14:35:54,858 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 14:35:54,862 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 14:35:54,866 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 14:35:54,878 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 14:35:54,883 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 14:35:54,887 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 14:35:54,890 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 14:35:54,894 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 14:35:54,901 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 14:35:54,908 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 14:35:54,912 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 14:35:54,918 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 14:35:54,929 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 14:35:54,930 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 14:35:54,932 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 14:35:54,936 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 14:35:54,946 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 14:35:54,980 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 14:35:55,050 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 14:35:56,295 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 14:35:57,030 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 14:35:57,083 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 14:35:58,486 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1b43be7, org.springframework.security.web.context.SecurityContextPersistenceFilter@780587b7, org.springframework.security.web.header.HeaderWriterFilter@4e0416b9, org.springframework.security.web.authentication.logout.LogoutFilter@12ddc232, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@27b98018, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4ee00da, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@602a44f5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@40373fae, org.springframework.security.web.session.SessionManagementFilter@51854bf8, org.springframework.security.web.access.ExceptionTranslationFilter@72da233c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1fe5c22e]
2020-12-27 14:35:58,526 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@3ac136c5, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@67dc1aad, org.springframework.security.web.context.SecurityContextPersistenceFilter@47502bd6, org.springframework.security.web.header.HeaderWriterFilter@5ba168ee, org.springframework.web.filter.CorsFilter@33310d65, org.springframework.security.web.authentication.logout.LogoutFilter@6118c5b8, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@61034e5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@42b7a49c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1201523c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@63e7ab8, org.springframework.security.web.session.SessionManagementFilter@16246803, org.springframework.security.web.access.ExceptionTranslationFilter@678c4dc5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1b65cbf0]
2020-12-27 14:35:58,536 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@742f71db, org.springframework.security.web.context.SecurityContextPersistenceFilter@5ebd9b66, org.springframework.security.web.header.HeaderWriterFilter@29102ed9, org.springframework.security.web.authentication.logout.LogoutFilter@5a0dba6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@637b9d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@282debae, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@35a2f460, org.springframework.security.web.session.SessionManagementFilter@f821896, org.springframework.security.web.access.ExceptionTranslationFilter@89ac357, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4daa4365]
2020-12-27 14:35:58,741 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 14:35:58,772 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 14:35:58,776 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootApplicationAflcv in 11.744 seconds (JVM running for 12.699)
2020-12-27 14:36:24,658 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-27 14:36:24,659 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2020-12-27 14:36:24,679 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 20 ms
2020-12-27 14:36:25,154 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 14:36:25,274 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 14:36:25,329 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios_roles (usuario_id, role_id) values (?, ?)
2020-12-27 14:36:48,110 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.cod_activacion=?
2020-12-27 14:36:48,137 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] update usuarios set acepta_emails=?, apellidos=?, cod_activacion=?, cod_cambio_passw=?, email=?, enabled=?, esperando_cambio_passw=?, fecha_activado=?, fecha_registro=?, fecha_sol_cambio_passw=?, finalizada_activacion=?, nombre=?, password=?, telefono=?, username=? where id=?
2020-12-27 14:36:48,143 DEBUG com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-3] [usuario activadoo, ok]
2020-12-27 14:38:28,022 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.cod_activacion=?
2020-12-27 14:38:28,026 DEBUG com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-1] [usuario activadoo, ok]
2020-12-27 14:42:29,327 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [Thread-6] Closing JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 14:42:29,328 INFO org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl [Thread-6] HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2020-12-27 14:42:29,329 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 14:42:29,333 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 14:42:29,335 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 14:42:29,337 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 14:42:29,349 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 14:42:29,352 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] drop table if exists clientes cascade
2020-12-27 14:42:29,364 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] drop table if exists cursos cascade
2020-12-27 14:42:29,370 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] drop table if exists herramienta cascade
2020-12-27 14:42:29,381 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] drop table if exists proyecto cascade
2020-12-27 14:42:29,392 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] drop table if exists proyecto_herramienta cascade
2020-12-27 14:42:29,398 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] drop table if exists roles cascade
2020-12-27 14:42:29,410 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] drop table if exists usuarios cascade
2020-12-27 14:42:29,435 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [Thread-6] drop table if exists usuarios_roles cascade
2020-12-27 14:42:29,450 INFO com.zaxxer.hikari.HikariDataSource [Thread-6] HikariPool-1 - Shutdown initiated...
2020-12-27 14:42:29,473 INFO com.zaxxer.hikari.HikariDataSource [Thread-6] HikariPool-1 - Shutdown completed.
2020-12-27 14:42:30,546 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootApplicationAflcv on antonioPortatil with PID 5332 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 14:42:30,554 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 14:42:30,555 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 14:42:30,710 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 14:42:30,711 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 14:42:30,712 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 14:42:32,203 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 14:42:32,407 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 188ms. Found 5 JPA repository interfaces.
2020-12-27 14:42:33,243 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:42:33,289 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:42:33,296 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:42:33,300 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4e21a37a' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:42:33,304 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:42:33,314 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:42:34,616 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 14:42:34,634 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 14:42:34,636 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 14:42:34,636 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 14:42:34,810 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 14:42:34,811 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 4098 ms
2020-12-27 14:42:35,158 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 14:42:35,289 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 14:42:35,599 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 14:42:35,808 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 14:42:36,016 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 14:42:36,048 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 14:42:37,356 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 14:42:37,364 WARN org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [restartedMain] GenerationTarget encountered exception accepting command : Error executing DDL "alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:145)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:73)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:320)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:462)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1237)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:378)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)
	at com.afl.restaurante.BootApplicationAflcv.main(BootApplicationAflcv.java:21)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: org.postgresql.util.PSQLException: ERROR: no existe la relación «proyecto»
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2497)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2233)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:310)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:446)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:370)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:311)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:274)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:269)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 40 common frames omitted
2020-12-27 14:42:37,365 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 14:42:37,366 WARN org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [restartedMain] GenerationTarget encountered exception accepting command : Error executing DDL "alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:145)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:73)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:320)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:462)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1237)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:378)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)
	at com.afl.restaurante.BootApplicationAflcv.main(BootApplicationAflcv.java:21)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: org.postgresql.util.PSQLException: ERROR: no existe la relación «proyecto_herramienta»
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2497)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2233)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:310)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:446)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:370)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:311)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:274)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:269)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 40 common frames omitted
2020-12-27 14:42:37,367 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 14:42:37,368 WARN org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [restartedMain] GenerationTarget encountered exception accepting command : Error executing DDL "alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:145)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:73)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:320)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:462)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1237)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:378)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)
	at com.afl.restaurante.BootApplicationAflcv.main(BootApplicationAflcv.java:21)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: org.postgresql.util.PSQLException: ERROR: no existe la relación «proyecto_herramienta»
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2497)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2233)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:310)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:446)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:370)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:311)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:274)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:269)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 40 common frames omitted
2020-12-27 14:42:37,369 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 14:42:37,370 WARN org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [restartedMain] GenerationTarget encountered exception accepting command : Error executing DDL "alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:145)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:73)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:320)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:462)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1237)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:378)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)
	at com.afl.restaurante.BootApplicationAflcv.main(BootApplicationAflcv.java:21)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: org.postgresql.util.PSQLException: ERROR: no existe la relación «usuarios_roles»
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2497)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2233)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:310)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:446)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:370)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:311)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:274)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:269)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 40 common frames omitted
2020-12-27 14:42:37,371 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 14:42:37,372 WARN org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl [restartedMain] GenerationTarget encountered exception accepting command : Error executing DDL "alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec" via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec" via JDBC Statement
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlString(SchemaDropperImpl.java:375)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applySqlStrings(SchemaDropperImpl.java:359)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:331)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:230)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:154)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:126)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:145)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:73)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:320)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:462)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1237)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:378)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)
	at com.afl.restaurante.BootApplicationAflcv.main(BootApplicationAflcv.java:21)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)
Caused by: org.postgresql.util.PSQLException: ERROR: no existe la relación «usuarios_roles»
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2497)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2233)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:310)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:446)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:370)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:311)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:274)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:269)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)
	... 40 common frames omitted
2020-12-27 14:42:37,374 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 14:42:37,377 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] SQL Warning Code: 0, SQLState: 00000
2020-12-27 14:42:37,377 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] la tabla «clientes» no existe, omitiendo
2020-12-27 14:42:37,378 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 14:42:37,378 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] SQL Warning Code: 0, SQLState: 00000
2020-12-27 14:42:37,379 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] la tabla «cursos» no existe, omitiendo
2020-12-27 14:42:37,379 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 14:42:37,379 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] SQL Warning Code: 0, SQLState: 00000
2020-12-27 14:42:37,380 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] la tabla «herramienta» no existe, omitiendo
2020-12-27 14:42:37,380 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 14:42:37,380 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] SQL Warning Code: 0, SQLState: 00000
2020-12-27 14:42:37,381 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] la tabla «proyecto» no existe, omitiendo
2020-12-27 14:42:37,381 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 14:42:37,382 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] SQL Warning Code: 0, SQLState: 00000
2020-12-27 14:42:37,382 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] la tabla «proyecto_herramienta» no existe, omitiendo
2020-12-27 14:42:37,382 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 14:42:37,383 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] SQL Warning Code: 0, SQLState: 00000
2020-12-27 14:42:37,383 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] la tabla «roles» no existe, omitiendo
2020-12-27 14:42:37,383 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 14:42:37,384 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] SQL Warning Code: 0, SQLState: 00000
2020-12-27 14:42:37,384 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] la tabla «usuarios» no existe, omitiendo
2020-12-27 14:42:37,384 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 14:42:37,385 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] SQL Warning Code: 0, SQLState: 00000
2020-12-27 14:42:37,385 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] la tabla «usuarios_roles» no existe, omitiendo
2020-12-27 14:42:37,389 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 14:42:37,405 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 14:42:37,415 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 14:42:37,426 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 14:42:37,440 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 14:42:37,443 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 14:42:37,455 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 14:42:37,468 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 14:42:37,472 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 14:42:37,477 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 14:42:37,483 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 14:42:37,487 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 14:42:37,491 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 14:42:37,495 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 14:42:37,501 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 14:42:37,506 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 14:42:37,510 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 14:42:37,514 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 14:42:37,521 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 14:42:37,527 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 14:42:37,530 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 14:42:37,535 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 14:42:37,545 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 14:42:37,546 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 14:42:37,548 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 14:42:37,551 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 14:42:37,563 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 14:42:37,592 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 14:42:37,694 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 14:42:38,983 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 14:42:39,657 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 14:42:39,702 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 14:42:40,980 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@536547f0, org.springframework.security.web.context.SecurityContextPersistenceFilter@1fe8376f, org.springframework.security.web.header.HeaderWriterFilter@360aff0, org.springframework.security.web.authentication.logout.LogoutFilter@4742dce5, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@108c75e2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@64579618, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@645697cc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@42426e84, org.springframework.security.web.session.SessionManagementFilter@1fe5c22e, org.springframework.security.web.access.ExceptionTranslationFilter@2dcb2aa, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@53c864ca]
2020-12-27 14:42:41,009 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@435d3995, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7a73e8db, org.springframework.security.web.context.SecurityContextPersistenceFilter@71eae894, org.springframework.security.web.header.HeaderWriterFilter@129fc2e, org.springframework.web.filter.CorsFilter@7c31cf35, org.springframework.security.web.authentication.logout.LogoutFilter@1b65cbf0, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@4ed4ccf2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6658eba2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@28dea3cb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6414de55, org.springframework.security.web.session.SessionManagementFilter@1ab1f2eb, org.springframework.security.web.access.ExceptionTranslationFilter@1220b0a3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@24e78b45]
2020-12-27 14:42:41,020 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@44857105, org.springframework.security.web.context.SecurityContextPersistenceFilter@7751e856, org.springframework.security.web.header.HeaderWriterFilter@8a0acea, org.springframework.security.web.authentication.logout.LogoutFilter@31d1fdc1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@20130750, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2d593844, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5793ebca, org.springframework.security.web.session.SessionManagementFilter@18af8512, org.springframework.security.web.access.ExceptionTranslationFilter@7eb53418, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4fe724f0]
2020-12-27 14:42:41,197 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 14:42:41,237 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 14:42:41,242 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootApplicationAflcv in 11.994 seconds (JVM running for 12.95)
2020-12-27 14:43:14,564 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-27 14:43:14,565 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2020-12-27 14:43:14,582 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 17 ms
2020-12-27 14:43:15,055 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 14:43:15,172 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 14:43:15,219 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] insert into usuarios_roles (usuario_id, role_id) values (?, ?)
2020-12-27 14:43:44,179 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.cod_activacion=?
2020-12-27 14:43:44,214 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] update usuarios set acepta_emails=?, apellidos=?, cod_activacion=?, cod_cambio_passw=?, email=?, enabled=?, esperando_cambio_passw=?, fecha_activado=?, fecha_registro=?, fecha_sol_cambio_passw=?, finalizada_activacion=?, nombre=?, password=?, telefono=?, username=? where id=?
2020-12-27 14:43:44,222 DEBUG com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-2] [usuario activadoo, ok]
2020-12-27 14:43:44,357 DEBUG com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-4] envio notificacion cuenta activada http://localhost:8080
2020-12-27 14:45:03,951 DEBUG com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-9] envio notificacion cuenta activada http://localhost:8080
2020-12-27 14:53:49,244 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootApplicationAflcv on antonioPortatil with PID 9576 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 14:53:49,251 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 14:53:49,252 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 14:53:49,399 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 14:53:49,400 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 14:53:49,401 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 14:53:50,860 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 14:53:51,048 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 169ms. Found 5 JPA repository interfaces.
2020-12-27 14:53:51,916 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:53:51,965 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:53:51,973 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:53:51,979 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@164772a8' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:53:51,983 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:53:51,995 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:53:53,269 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 14:53:53,289 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 14:53:53,291 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 14:53:53,291 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 14:53:53,470 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 14:53:53,470 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 4069 ms
2020-12-27 14:53:53,815 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 14:53:53,941 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 14:53:54,250 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 14:53:54,489 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 14:53:54,669 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 14:53:54,698 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 14:53:56,104 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 14:53:56,109 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 14:53:56,110 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 14:53:56,112 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 14:53:56,113 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 14:53:56,115 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 14:53:56,126 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 14:53:56,131 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 14:53:56,138 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 14:53:56,144 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 14:53:56,148 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 14:53:56,153 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 14:53:56,163 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 14:53:56,169 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 14:53:56,182 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 14:53:56,189 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 14:53:56,202 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 14:53:56,212 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 14:53:56,215 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 14:53:56,222 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 14:53:56,234 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 14:53:56,237 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 14:53:56,242 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 14:53:56,246 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 14:53:56,250 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 14:53:56,254 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 14:53:56,257 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 14:53:56,262 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 14:53:56,266 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 14:53:56,270 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 14:53:56,273 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 14:53:56,282 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 14:53:56,288 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 14:53:56,290 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 14:53:56,295 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 14:53:56,306 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 14:53:56,307 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 14:53:56,309 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 14:53:56,314 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 14:53:56,324 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 14:53:56,354 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 14:53:56,430 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 14:53:57,475 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 14:53:58,178 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 14:53:58,225 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 14:53:59,467 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@634b466e, org.springframework.security.web.context.SecurityContextPersistenceFilter@644330e6, org.springframework.security.web.header.HeaderWriterFilter@35f42dc7, org.springframework.security.web.authentication.logout.LogoutFilter@1db1d1cf, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@162ddf47, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@27ba62d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6aafc3ed, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4f4a9029, org.springframework.security.web.session.SessionManagementFilter@557b83ca, org.springframework.security.web.access.ExceptionTranslationFilter@2df14e01, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@121e12e2]
2020-12-27 14:53:59,496 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@10b9840c, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70d7d7d5, org.springframework.security.web.context.SecurityContextPersistenceFilter@7eb2d136, org.springframework.security.web.header.HeaderWriterFilter@1bca0cb4, org.springframework.web.filter.CorsFilter@7b7c3e15, org.springframework.security.web.authentication.logout.LogoutFilter@b56a2e9, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@1c55ba7b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6bd1de61, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@20b5d003, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5316fb83, org.springframework.security.web.session.SessionManagementFilter@3b6f0388, org.springframework.security.web.access.ExceptionTranslationFilter@3b05de67, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@24c19061]
2020-12-27 14:53:59,504 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@75c8c34d, org.springframework.security.web.context.SecurityContextPersistenceFilter@1270548f, org.springframework.security.web.header.HeaderWriterFilter@6c53e32, org.springframework.security.web.authentication.logout.LogoutFilter@63e75c3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@62bd8071, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4da606ba, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@285bd54f, org.springframework.security.web.session.SessionManagementFilter@5c8c46e9, org.springframework.security.web.access.ExceptionTranslationFilter@49a7335b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@277c1fb7]
2020-12-27 14:53:59,660 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 14:53:59,696 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 14:53:59,699 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootApplicationAflcv in 11.282 seconds (JVM running for 12.128)
2020-12-27 14:54:20,205 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-27 14:54:20,205 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2020-12-27 14:54:20,224 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 18 ms
2020-12-27 14:54:20,631 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 14:54:20,821 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 14:54:20,921 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios_roles (usuario_id, role_id) values (?, ?)
2020-12-27 14:54:46,926 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.cod_activacion=?
2020-12-27 14:54:46,957 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] update usuarios set acepta_emails=?, apellidos=?, cod_activacion=?, cod_cambio_passw=?, email=?, enabled=?, esperando_cambio_passw=?, fecha_activado=?, fecha_registro=?, fecha_sol_cambio_passw=?, finalizada_activacion=?, nombre=?, password=?, telefono=?, username=? where id=?
2020-12-27 14:54:46,961 DEBUG com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-3] [usuario activadoo, ok]
2020-12-27 14:58:33,207 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootApplicationAflcv on antonioPortatil with PID 880 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 14:58:33,215 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 14:58:33,217 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 14:58:33,329 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 14:58:33,329 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 14:58:33,330 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 14:58:34,845 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 14:58:35,047 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 184ms. Found 5 JPA repository interfaces.
2020-12-27 14:58:35,867 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:58:35,921 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:58:35,930 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:58:35,936 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@55ff4000' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:58:35,944 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:58:35,959 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 14:58:37,219 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 14:58:37,237 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 14:58:37,239 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 14:58:37,240 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 14:58:37,434 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 14:58:37,436 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 4105 ms
2020-12-27 14:58:37,857 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 14:58:38,019 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 14:58:38,266 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 14:58:38,500 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 14:58:38,702 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 14:58:38,738 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 14:58:40,080 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 14:58:40,085 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 14:58:40,087 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 14:58:40,088 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 14:58:40,090 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 14:58:40,091 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 14:58:40,102 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 14:58:40,107 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 14:58:40,113 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 14:58:40,121 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 14:58:40,125 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 14:58:40,130 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 14:58:40,142 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 14:58:40,149 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 14:58:40,168 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 14:58:40,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 14:58:40,194 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 14:58:40,208 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 14:58:40,211 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 14:58:40,219 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 14:58:40,230 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 14:58:40,233 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 14:58:40,238 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 14:58:40,245 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 14:58:40,249 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 14:58:40,253 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 14:58:40,260 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 14:58:40,264 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 14:58:40,269 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 14:58:40,273 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 14:58:40,278 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 14:58:40,285 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 14:58:40,291 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 14:58:40,294 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 14:58:40,300 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 14:58:40,310 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 14:58:40,311 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 14:58:40,314 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 14:58:40,318 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 14:58:40,328 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 14:58:40,357 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 14:58:40,435 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 14:58:41,572 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 14:58:42,319 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 14:58:42,374 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 14:58:43,644 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@53c864ca, org.springframework.security.web.context.SecurityContextPersistenceFilter@3d7f9b2b, org.springframework.security.web.header.HeaderWriterFilter@7582db6d, org.springframework.security.web.authentication.logout.LogoutFilter@522d228b, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6bd18ea8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@686e6f10, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@67a1e1f7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@280e1c2d, org.springframework.security.web.session.SessionManagementFilter@4e7f9e48, org.springframework.security.web.access.ExceptionTranslationFilter@1a6e639c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4bbd737]
2020-12-27 14:58:43,682 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@409ce329, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7567fa6e, org.springframework.security.web.context.SecurityContextPersistenceFilter@465afd8d, org.springframework.security.web.header.HeaderWriterFilter@6f75f255, org.springframework.web.filter.CorsFilter@b17dd40, org.springframework.security.web.authentication.logout.LogoutFilter@42426e84, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@33310d65, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@358ab3c1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@752d187f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@69f09886, org.springframework.security.web.session.SessionManagementFilter@32d28785, org.springframework.security.web.access.ExceptionTranslationFilter@108c75e2, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@114e7975]
2020-12-27 14:58:43,689 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4eafc2d3, org.springframework.security.web.context.SecurityContextPersistenceFilter@2b872a8f, org.springframework.security.web.header.HeaderWriterFilter@735179a5, org.springframework.security.web.authentication.logout.LogoutFilter@24e78b45, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41c4c337, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@392006fb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2bffdeed, org.springframework.security.web.session.SessionManagementFilter@46e92c17, org.springframework.security.web.access.ExceptionTranslationFilter@6741ad0d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6414de55]
2020-12-27 14:58:43,842 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 14:58:43,879 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 14:58:43,882 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootApplicationAflcv in 11.511 seconds (JVM running for 12.371)
2020-12-27 14:59:14,588 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-27 14:59:14,589 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2020-12-27 14:59:14,605 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 16 ms
2020-12-27 14:59:14,970 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 14:59:15,127 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 14:59:15,189 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios_roles (usuario_id, role_id) values (?, ?)
2020-12-27 15:00:36,029 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.cod_activacion=?
2020-12-27 15:00:36,062 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-4] update usuarios set acepta_emails=?, apellidos=?, cod_activacion=?, cod_cambio_passw=?, email=?, enabled=?, esperando_cambio_passw=?, fecha_activado=?, fecha_registro=?, fecha_sol_cambio_passw=?, finalizada_activacion=?, nombre=?, password=?, telefono=?, username=? where id=?
2020-12-27 15:00:36,069 DEBUG com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-4] [usuario activadoo, ok]
2020-12-27 15:08:04,495 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootApplicationAflcv on antonioPortatil with PID 23860 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 15:08:04,503 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 15:08:04,505 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 15:08:04,654 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 15:08:04,655 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 15:08:04,656 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 15:08:06,164 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 15:08:06,376 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 193ms. Found 5 JPA repository interfaces.
2020-12-27 15:08:07,245 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 15:08:07,307 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 15:08:07,315 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 15:08:07,320 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@43e352f8' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 15:08:07,330 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 15:08:07,342 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 15:08:08,592 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 15:08:08,615 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 15:08:08,617 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 15:08:08,618 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 15:08:08,826 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 15:08:08,827 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 4171 ms
2020-12-27 15:08:09,166 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 15:08:09,302 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 15:08:09,615 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 15:08:09,841 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 15:08:10,071 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 15:08:10,099 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 15:08:11,470 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 15:08:11,475 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 15:08:11,477 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 15:08:11,478 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 15:08:11,480 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 15:08:11,481 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 15:08:11,494 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 15:08:11,499 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 15:08:11,506 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 15:08:11,514 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 15:08:11,518 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 15:08:11,525 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 15:08:11,539 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 15:08:11,548 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 15:08:11,573 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 15:08:11,583 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 15:08:11,594 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 15:08:11,605 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 15:08:11,609 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 15:08:11,619 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 15:08:11,633 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 15:08:11,638 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 15:08:11,644 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 15:08:11,651 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 15:08:11,656 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 15:08:11,661 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 15:08:11,666 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 15:08:11,671 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 15:08:11,676 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 15:08:11,685 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 15:08:11,690 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 15:08:11,728 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 15:08:11,734 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 15:08:11,738 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 15:08:11,744 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 15:08:11,754 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 15:08:11,755 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 15:08:11,757 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 15:08:11,761 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 15:08:11,769 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 15:08:11,801 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 15:08:11,896 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 15:08:13,072 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 15:08:13,752 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 15:08:13,810 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 15:08:15,001 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1c9f6589, org.springframework.security.web.context.SecurityContextPersistenceFilter@46ce6ba2, org.springframework.security.web.header.HeaderWriterFilter@1d01cdbc, org.springframework.security.web.authentication.logout.LogoutFilter@4cc1a796, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4c85bb17, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7ed7bfd1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@191a161, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1aa675ef, org.springframework.security.web.session.SessionManagementFilter@768f4da0, org.springframework.security.web.access.ExceptionTranslationFilter@3ef0ad3a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6b3b1346]
2020-12-27 15:08:15,027 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@28b836e2, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2fda1445, org.springframework.security.web.context.SecurityContextPersistenceFilter@6c2f9c0b, org.springframework.security.web.header.HeaderWriterFilter@3f3107d3, org.springframework.web.filter.CorsFilter@1f13dc8c, org.springframework.security.web.authentication.logout.LogoutFilter@9cbb3f9, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@34b79b81, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@565d597b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6165d3fc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@13e26fdc, org.springframework.security.web.session.SessionManagementFilter@59a435a9, org.springframework.security.web.access.ExceptionTranslationFilter@678bb865, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1952b5ff]
2020-12-27 15:08:15,033 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@23e0ea14, org.springframework.security.web.context.SecurityContextPersistenceFilter@4dce278f, org.springframework.security.web.header.HeaderWriterFilter@6f8f66fa, org.springframework.security.web.authentication.logout.LogoutFilter@125a3f20, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@18e4783a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c48656a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2b509f5, org.springframework.security.web.session.SessionManagementFilter@21906dcc, org.springframework.security.web.access.ExceptionTranslationFilter@41f281a5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2f2f5460]
2020-12-27 15:08:15,202 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 15:08:15,239 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 15:08:15,243 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootApplicationAflcv in 11.631 seconds (JVM running for 12.561)
2020-12-27 15:08:46,632 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-27 15:08:46,633 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2020-12-27 15:08:46,647 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 14 ms
2020-12-27 15:08:47,092 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 15:08:47,206 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 15:08:47,254 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios_roles (usuario_id, role_id) values (?, ?)
2020-12-27 15:08:59,247 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.cod_activacion=?
2020-12-27 15:08:59,276 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] update usuarios set acepta_emails=?, apellidos=?, cod_activacion=?, cod_cambio_passw=?, email=?, enabled=?, esperando_cambio_passw=?, fecha_activado=?, fecha_registro=?, fecha_sol_cambio_passw=?, finalizada_activacion=?, nombre=?, password=?, telefono=?, username=? where id=?
2020-12-27 15:08:59,282 DEBUG com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-3] [usuario activadoo, ok]
2020-12-27 15:18:46,379 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.username=?
2020-12-27 15:18:46,388 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select roles0_.usuario_id as usuario_1_7_0_, roles0_.role_id as role_id2_7_0_, role1_.id as id1_5_1_, role1_.nombre as nombre2_5_1_ from usuarios_roles roles0_ inner join roles role1_ on roles0_.role_id=role1_.id where roles0_.usuario_id=?
2020-12-27 15:18:46,403 INFO com.afl.restaurante.services.UsuarioService [http-nio-8080-exec-2] Role:ROLE_USER
2020-12-27 15:18:46,582 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.username=?
2020-12-27 15:33:09,992 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-5] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 15:33:09,996 DEBUG com.afl.restaurante.controllers.UsuarioController [http-nio-8080-exec-5] Error en registro de usuario antonio63j@hotmail.com,antonio63j@hotmail.com ya ha sido utilizado
2020-12-27 16:35:27,269 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootApplicationAflcv on antonioPortatil with PID 5888 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 16:35:27,273 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 16:35:27,274 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 16:35:27,361 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 16:35:27,362 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 16:35:27,362 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 16:35:28,762 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 16:35:28,965 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 183ms. Found 5 JPA repository interfaces.
2020-12-27 16:35:29,841 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 16:35:29,896 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 16:35:29,904 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 16:35:29,908 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@38fd95e2' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 16:35:29,919 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 16:35:29,931 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 16:35:31,137 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 16:35:31,153 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 16:35:31,155 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 16:35:31,155 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 16:35:31,373 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 16:35:31,374 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 4011 ms
2020-12-27 16:35:31,745 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 16:35:31,884 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 16:35:32,131 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 16:35:32,303 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 16:35:32,463 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 16:35:32,503 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 16:35:33,903 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 16:35:33,909 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 16:35:33,910 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 16:35:33,912 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 16:35:33,913 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 16:35:33,914 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 16:35:33,926 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 16:35:33,930 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 16:35:33,938 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 16:35:33,945 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 16:35:33,949 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 16:35:33,954 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 16:35:33,964 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 16:35:33,971 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 16:35:33,986 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 16:35:33,996 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 16:35:34,007 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 16:35:34,019 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 16:35:34,022 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 16:35:34,028 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 16:35:34,040 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 16:35:34,043 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 16:35:34,047 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 16:35:34,051 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 16:35:34,055 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 16:35:34,063 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 16:35:34,067 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 16:35:34,071 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 16:35:34,075 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 16:35:34,079 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 16:35:34,087 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 16:35:34,095 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 16:35:34,101 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 16:35:34,104 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 16:35:34,111 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 16:35:34,121 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 16:35:34,122 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 16:35:34,126 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 16:35:34,130 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 16:35:34,140 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 16:35:34,170 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 16:35:34,232 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 16:35:35,350 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 16:35:36,010 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 16:35:36,056 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 16:35:37,414 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6027f136, org.springframework.security.web.context.SecurityContextPersistenceFilter@77111972, org.springframework.security.web.header.HeaderWriterFilter@51fa752, org.springframework.security.web.authentication.logout.LogoutFilter@2e50c5fe, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4f4a9029, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4b56ced0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@505e17ee, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7ffbe299, org.springframework.security.web.session.SessionManagementFilter@39fa766e, org.springframework.security.web.access.ExceptionTranslationFilter@27ba62d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5e4f411f]
2020-12-27 16:35:37,442 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@3fccabe8, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2cec5bcc, org.springframework.security.web.context.SecurityContextPersistenceFilter@2c450ce2, org.springframework.security.web.header.HeaderWriterFilter@6e915734, org.springframework.web.filter.CorsFilter@49a7335b, org.springframework.security.web.authentication.logout.LogoutFilter@47f68b45, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@3ea9ab1b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@12bab269, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@76f66ffd, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6c53e32, org.springframework.security.web.session.SessionManagementFilter@60aab72d, org.springframework.security.web.access.ExceptionTranslationFilter@b56a2e9, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5b6299e4]
2020-12-27 16:35:37,449 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3f27d5f2, org.springframework.security.web.context.SecurityContextPersistenceFilter@7ea3baf1, org.springframework.security.web.header.HeaderWriterFilter@6d57f63b, org.springframework.security.web.authentication.logout.LogoutFilter@4b4c9687, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@277c1fb7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@75c8c34d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5e21bc16, org.springframework.security.web.session.SessionManagementFilter@1039aefd, org.springframework.security.web.access.ExceptionTranslationFilter@63e75c3e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@663bd582]
2020-12-27 16:35:37,617 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 16:35:37,655 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 16:35:37,659 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootApplicationAflcv in 11.227 seconds (JVM running for 12.11)
2020-12-27 16:36:03,478 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-27 16:36:03,479 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2020-12-27 16:36:03,492 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 13 ms
2020-12-27 16:36:03,975 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 16:36:04,084 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 16:36:04,145 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] insert into usuarios_roles (usuario_id, role_id) values (?, ?)
2020-12-27 16:36:41,313 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.cod_activacion=?
2020-12-27 16:36:41,337 INFO com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-3] Solicitud de activación fuera de plazo, el usuario antonio63j@hotmail.com queda sin activar
2020-12-27 16:39:33,801 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootApplicationAflcv on antonioPortatil with PID 25232 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 16:39:33,805 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 16:39:33,806 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 16:39:33,911 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 16:39:33,911 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 16:39:33,912 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 16:39:35,383 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 16:39:35,548 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 147ms. Found 5 JPA repository interfaces.
2020-12-27 16:39:36,474 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 16:39:36,555 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 16:39:36,563 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 16:39:36,567 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1b495c94' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 16:39:36,571 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 16:39:36,583 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 16:39:37,870 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 16:39:37,895 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 16:39:37,896 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 16:39:37,897 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 16:39:38,087 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 16:39:38,089 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 4177 ms
2020-12-27 16:39:38,471 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 16:39:38,605 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 16:39:38,960 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 16:39:39,198 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 16:39:39,422 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 16:39:39,465 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 16:39:41,023 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 16:39:41,029 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 16:39:41,030 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 16:39:41,032 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 16:39:41,033 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 16:39:41,034 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 16:39:41,045 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 16:39:41,049 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 16:39:41,057 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 16:39:41,064 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 16:39:41,068 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 16:39:41,073 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 16:39:41,083 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 16:39:41,090 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 16:39:41,107 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 16:39:41,120 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 16:39:41,130 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 16:39:41,143 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 16:39:41,146 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 16:39:41,152 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 16:39:41,168 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 16:39:41,170 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 16:39:41,174 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 16:39:41,177 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 16:39:41,182 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 16:39:41,190 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 16:39:41,193 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 16:39:41,197 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 16:39:41,201 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 16:39:41,205 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 16:39:41,208 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 16:39:41,216 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 16:39:41,222 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 16:39:41,225 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 16:39:41,232 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 16:39:41,244 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 16:39:41,245 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 16:39:41,247 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 16:39:41,252 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 16:39:41,263 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 16:39:41,296 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 16:39:41,383 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 16:39:42,541 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 16:39:43,335 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 16:39:43,388 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 16:39:44,632 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2e82c691, org.springframework.security.web.context.SecurityContextPersistenceFilter@45a38466, org.springframework.security.web.header.HeaderWriterFilter@3180929f, org.springframework.security.web.authentication.logout.LogoutFilter@579cdf86, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2125032, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6a63a9be, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5ad2e16b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@73dfa295, org.springframework.security.web.session.SessionManagementFilter@465a9434, org.springframework.security.web.access.ExceptionTranslationFilter@25e29a7, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1994bb04]
2020-12-27 16:39:44,663 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@4b12080d, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@39c16338, org.springframework.security.web.context.SecurityContextPersistenceFilter@5f36ad49, org.springframework.security.web.header.HeaderWriterFilter@4001699a, org.springframework.web.filter.CorsFilter@4c55a049, org.springframework.security.web.authentication.logout.LogoutFilter@4abc62ab, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@11f2d2f2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@28e13a3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4908e7d1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1862ee46, org.springframework.security.web.session.SessionManagementFilter@183e2aac, org.springframework.security.web.access.ExceptionTranslationFilter@4063a0cc, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6186bcb1]
2020-12-27 16:39:44,676 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2bc3b0d8, org.springframework.security.web.context.SecurityContextPersistenceFilter@3091d014, org.springframework.security.web.header.HeaderWriterFilter@5649abc0, org.springframework.security.web.authentication.logout.LogoutFilter@328e2072, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2d1678e8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@369ad121, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@77290b3b, org.springframework.security.web.session.SessionManagementFilter@f36a6e6, org.springframework.security.web.access.ExceptionTranslationFilter@7e3c74ca, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@9dfc847]
2020-12-27 16:39:44,865 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 16:39:44,899 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 16:39:44,903 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootApplicationAflcv in 11.928 seconds (JVM running for 12.827)
2020-12-27 16:40:13,044 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-27 16:40:13,044 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2020-12-27 16:40:13,058 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 13 ms
2020-12-27 16:40:13,522 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 16:40:13,640 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 16:40:13,691 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-1] insert into usuarios_roles (usuario_id, role_id) values (?, ?)
2020-12-27 16:40:27,603 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as id1_6_, usuario0_.acepta_emails as acepta_e2_6_, usuario0_.apellidos as apellido3_6_, usuario0_.cod_activacion as cod_acti4_6_, usuario0_.cod_cambio_passw as cod_camb5_6_, usuario0_.email as email6_6_, usuario0_.enabled as enabled7_6_, usuario0_.esperando_cambio_passw as esperand8_6_, usuario0_.fecha_activado as fecha_ac9_6_, usuario0_.fecha_registro as fecha_r10_6_, usuario0_.fecha_sol_cambio_passw as fecha_s11_6_, usuario0_.finalizada_activacion as finaliz12_6_, usuario0_.nombre as nombre13_6_, usuario0_.password as passwor14_6_, usuario0_.telefono as telefon15_6_, usuario0_.username as usernam16_6_ from usuarios usuario0_ where usuario0_.cod_activacion=?
2020-12-27 16:40:27,641 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] update usuarios set acepta_emails=?, apellidos=?, cod_activacion=?, cod_cambio_passw=?, email=?, enabled=?, esperando_cambio_passw=?, fecha_activado=?, fecha_registro=?, fecha_sol_cambio_passw=?, finalizada_activacion=?, nombre=?, password=?, telefono=?, username=? where id=?
2020-12-27 16:40:27,645 DEBUG com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-2] [usuario activadoo, ok]
2020-12-27 16:40:27,833 INFO com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-3] parametro de entrada messageKey = Optional[message.accountVerified]
2020-12-27 17:53:18,831 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootApplicationAflcv on antonioPortatil with PID 8328 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 17:53:18,835 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 17:53:18,837 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 17:53:18,929 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 17:53:18,930 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 17:53:18,930 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 17:53:20,323 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 17:53:20,494 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 153ms. Found 5 JPA repository interfaces.
2020-12-27 17:53:21,290 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 17:53:21,343 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 17:53:21,358 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 17:53:21,366 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5aa82b07' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 17:53:21,368 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 17:53:21,377 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 17:53:22,564 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 17:53:22,582 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 17:53:22,584 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 17:53:22,585 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 17:53:22,807 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 17:53:22,808 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 3878 ms
2020-12-27 17:53:23,164 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 17:53:23,294 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 17:53:23,559 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 17:53:23,747 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 17:53:23,920 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 17:53:23,948 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 17:53:25,335 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 17:53:25,341 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 17:53:25,342 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 17:53:25,344 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 17:53:25,345 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 17:53:25,346 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 17:53:25,357 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 17:53:25,362 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists empresa cascade
2020-12-27 17:53:25,365 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] SQL Warning Code: 0, SQLState: 00000
2020-12-27 17:53:25,365 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler [restartedMain] la tabla «empresa» no existe, omitiendo
2020-12-27 17:53:25,365 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 17:53:25,373 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 17:53:25,380 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 17:53:25,383 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 17:53:25,388 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 17:53:25,398 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 17:53:25,405 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 17:53:25,421 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 17:53:25,428 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table empresa (id  bigserial not null, direccion varchar(60), email varchar(60), nombre varchar(60) not null, telefono varchar(11), url varchar(60), primary key (id))
2020-12-27 17:53:25,434 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 17:53:25,445 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 17:53:25,456 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 17:53:25,459 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 17:53:25,466 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 17:53:25,476 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 17:53:25,479 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 17:53:25,483 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table empresa add constraint UK_2fqlxbcs4h827hio1qam0dhd3 unique (nombre)
2020-12-27 17:53:25,488 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 17:53:25,491 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 17:53:25,495 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 17:53:25,498 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 17:53:25,502 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 17:53:25,506 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 17:53:25,509 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 17:53:25,513 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 17:53:25,516 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 17:53:25,524 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 17:53:25,530 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 17:53:25,533 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 17:53:25,539 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 17:53:25,550 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 17:53:25,552 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 17:53:25,555 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 17:53:25,559 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 17:53:25,572 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 17:53:25,603 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 17:53:25,692 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 17:53:26,933 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 17:53:27,582 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 17:53:27,624 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 17:53:28,747 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@262c8c85, org.springframework.security.web.context.SecurityContextPersistenceFilter@3164bc1c, org.springframework.security.web.header.HeaderWriterFilter@365cebee, org.springframework.security.web.authentication.logout.LogoutFilter@2d593844, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@22c62233, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@76d5dd8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2b872a8f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3ff3e98, org.springframework.security.web.session.SessionManagementFilter@4e52ab3a, org.springframework.security.web.access.ExceptionTranslationFilter@47108a5a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7904547c]
2020-12-27 17:53:28,770 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@352a31cb, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@32465cc0, org.springframework.security.web.context.SecurityContextPersistenceFilter@aff0af7, org.springframework.security.web.header.HeaderWriterFilter@2e540c8d, org.springframework.web.filter.CorsFilter@cf73254, org.springframework.security.web.authentication.logout.LogoutFilter@743ea694, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@726f119, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5db88af5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5306d5ab, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@20e7b250, org.springframework.security.web.session.SessionManagementFilter@6f974412, org.springframework.security.web.access.ExceptionTranslationFilter@9ae15c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@201195b7]
2020-12-27 17:53:28,778 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2c5bb7ce, org.springframework.security.web.context.SecurityContextPersistenceFilter@61142523, org.springframework.security.web.header.HeaderWriterFilter@21202d83, org.springframework.security.web.authentication.logout.LogoutFilter@33de01e0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4a16b207, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6afac2f3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@69c10093, org.springframework.security.web.session.SessionManagementFilter@34c5b0a6, org.springframework.security.web.access.ExceptionTranslationFilter@6bb80224, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@58507879]
2020-12-27 17:53:28,936 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 17:53:28,967 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 17:53:28,970 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootApplicationAflcv in 10.933 seconds (JVM running for 11.785)
2020-12-27 17:59:57,492 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootApplicationAflcv on antonioPortatil with PID 15596 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 17:59:57,498 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 17:59:57,499 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 17:59:57,610 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 17:59:57,611 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 17:59:57,612 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 17:59:59,069 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 17:59:59,221 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 136ms. Found 5 JPA repository interfaces.
2020-12-27 18:00:00,009 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 18:00:00,097 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 18:00:00,110 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 18:00:00,114 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@133c15ed' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 18:00:00,116 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 18:00:00,126 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 18:00:01,338 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 18:00:01,359 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 18:00:01,361 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 18:00:01,361 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 18:00:01,550 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 18:00:01,551 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 3939 ms
2020-12-27 18:00:01,900 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 18:00:02,023 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 18:00:02,284 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 18:00:02,487 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 18:00:02,653 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 18:00:02,698 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 18:00:04,007 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 18:00:04,022 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 18:00:04,024 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 18:00:04,025 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 18:00:04,027 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 18:00:04,028 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 18:00:04,039 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 18:00:04,043 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists empresa cascade
2020-12-27 18:00:04,049 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 18:00:04,056 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 18:00:04,063 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 18:00:04,067 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 18:00:04,072 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 18:00:04,082 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 18:00:04,088 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 18:00:04,103 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 18:00:04,111 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table empresa (id  bigserial not null, direccion varchar(60), email varchar(60), nombre varchar(60) not null, telefono varchar(11), url varchar(60), primary key (id))
2020-12-27 18:00:04,117 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 18:00:04,127 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 18:00:04,138 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 18:00:04,140 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 18:00:04,147 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 18:00:04,158 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 18:00:04,160 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 18:00:04,165 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table empresa add constraint UK_2fqlxbcs4h827hio1qam0dhd3 unique (nombre)
2020-12-27 18:00:04,169 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 18:00:04,172 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 18:00:04,176 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 18:00:04,180 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 18:00:04,184 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 18:00:04,188 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 18:00:04,191 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 18:00:04,194 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 18:00:04,200 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 18:00:04,209 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 18:00:04,217 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 18:00:04,220 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 18:00:04,226 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 18:00:04,237 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 18:00:04,238 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 18:00:04,241 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 18:00:04,242 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO empresa (nombre, direccion, telefono, url, email) VALUES('Cazuela Cortubí', 'C/Cazuela Cortubí 22, (Madrid)', '627336511','http://localhost:4200', 'info@fernandezLucena.es')
2020-12-27 18:00:04,249 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 18:00:04,262 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 18:00:04,293 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 18:00:04,361 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 18:00:05,489 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 18:00:06,220 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 18:00:06,275 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 18:00:07,514 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@aa6e153, org.springframework.security.web.context.SecurityContextPersistenceFilter@735179a5, org.springframework.security.web.header.HeaderWriterFilter@409ce329, org.springframework.security.web.authentication.logout.LogoutFilter@6dbfc758, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@22b6fb2f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2b872a8f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24e78b45, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@70571561, org.springframework.security.web.session.SessionManagementFilter@76d5dd8, org.springframework.security.web.access.ExceptionTranslationFilter@42f78f25, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@28dd6a8]
2020-12-27 18:00:07,547 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@44277bee, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@44878ff6, org.springframework.security.web.context.SecurityContextPersistenceFilter@743ea694, org.springframework.security.web.header.HeaderWriterFilter@5306d5ab, org.springframework.web.filter.CorsFilter@71d770a0, org.springframework.security.web.authentication.logout.LogoutFilter@2a2a0674, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@685642b1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6d4875c4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8065e4b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6cbf39f8, org.springframework.security.web.session.SessionManagementFilter@6e4ac0d, org.springframework.security.web.access.ExceptionTranslationFilter@5db88af5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@20e7b250]
2020-12-27 18:00:07,554 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4d0ea149, org.springframework.security.web.context.SecurityContextPersistenceFilter@33de01e0, org.springframework.security.web.header.HeaderWriterFilter@6afac2f3, org.springframework.security.web.authentication.logout.LogoutFilter@58507879, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4ca71b16, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7076a52b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2caae5e3, org.springframework.security.web.session.SessionManagementFilter@73a31f8a, org.springframework.security.web.access.ExceptionTranslationFilter@4a16b207, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3c9a94d3]
2020-12-27 18:00:07,720 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 18:00:07,759 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 18:00:07,763 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootApplicationAflcv in 11.137 seconds (JVM running for 12.002)
2020-12-27 22:37:33,684 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Starting BootAppRestaurante on antonioPortatil with PID 16228 (C:\Proyectos\AngularSpring\restaurante\restaurante-back\target\classes started by antonio in C:\Proyectos\AngularSpring\restaurante\restaurante-back)
2020-12-27 22:37:33,692 DEBUG org.springframework.boot.StartupInfoLogger [restartedMain] Running with Spring Boot v2.2.2.RELEASE, Spring v5.2.2.RELEASE
2020-12-27 22:37:33,694 INFO org.springframework.boot.SpringApplication [restartedMain] No active profile set, falling back to default profiles: default
2020-12-27 22:37:33,820 INFO org.springframework.boot.logging.DeferredLog [restartedMain] The Class-Path manifest attribute in C:\Users\antonio\.m2\repository\org\glassfish\jaxb\jaxb-runtime\2.3.2\jaxb-runtime-2.3.2.jar referenced one or more files that do not exist: file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.xml.bind-api-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/txw2-2.3.2.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/istack-commons-runtime-3.0.8.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/stax-ex-1.8.1.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/FastInfoset-1.2.16.jar,file:/C:/Users/antonio/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.3.2/jakarta.activation-api-1.2.1.jar
2020-12-27 22:37:33,822 INFO org.springframework.boot.logging.DeferredLog [restartedMain] Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2020-12-27 22:37:33,822 INFO org.springframework.boot.logging.DeferredLog [restartedMain] For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2020-12-27 22:37:35,285 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-12-27 22:37:35,497 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [restartedMain] Finished Spring Data repository scanning in 192ms. Found 6 JPA repository interfaces.
2020-12-27 22:37:36,353 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 22:37:36,400 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 22:37:36,406 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 22:37:36,413 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@670cfcc2' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 22:37:36,415 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 22:37:36,431 INFO org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker [restartedMain] Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-12-27 22:37:37,716 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat initialized with port(s): 8080 (http)
2020-12-27 22:37:37,732 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing ProtocolHandler ["http-nio-8080"]
2020-12-27 22:37:37,734 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting service [Tomcat]
2020-12-27 22:37:37,734 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting Servlet engine: [Apache Tomcat/9.0.29]
2020-12-27 22:37:37,920 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Initializing Spring embedded WebApplicationContext
2020-12-27 22:37:37,921 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [restartedMain] Root WebApplicationContext: initialization completed in 4098 ms
2020-12-27 22:37:38,283 INFO org.hibernate.jpa.internal.util.LogHelper [restartedMain] HHH000204: Processing PersistenceUnitInfo [name: default]
2020-12-27 22:37:38,449 INFO org.hibernate.Version [restartedMain] HHH000412: Hibernate Core {5.4.9.Final}
2020-12-27 22:37:38,675 INFO org.hibernate.annotations.common.reflection.java.JavaReflectionManager [restartedMain] HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-12-27 22:37:38,855 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Starting...
2020-12-27 22:37:39,020 INFO com.zaxxer.hikari.HikariDataSource [restartedMain] HikariPool-1 - Start completed.
2020-12-27 22:37:39,047 INFO org.hibernate.dialect.Dialect [restartedMain] HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2020-12-27 22:37:40,462 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto drop constraint FK391t9hcdgfjcs6f7xf4khf1sp
2020-12-27 22:37:40,469 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKq87ke7fdkv8d2yjc4ili8pg1t
2020-12-27 22:37:40,471 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta drop constraint FKn0ya56kcb23nev3x5pxemuw76
2020-12-27 22:37:40,472 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKihom0uklpkfpffipxpoyf7b74
2020-12-27 22:37:40,474 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles drop constraint FKqcxu02bqipxpr7cjyj9dmhwec
2020-12-27 22:37:40,475 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists clientes cascade
2020-12-27 22:37:40,486 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists cursos cascade
2020-12-27 22:37:40,490 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists empresa cascade
2020-12-27 22:37:40,496 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists herramienta cascade
2020-12-27 22:37:40,503 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto cascade
2020-12-27 22:37:40,510 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists proyecto_herramienta cascade
2020-12-27 22:37:40,513 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists roles cascade
2020-12-27 22:37:40,519 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios cascade
2020-12-27 22:37:40,528 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] drop table if exists usuarios_roles cascade
2020-12-27 22:37:40,535 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table clientes (id  bigserial not null, actividad TEXT, cliente varchar(255), clientefoto varchar(255), empresa varchar(255), empresafoto varchar(255), experiencia TEXT, fin date, inicio date, sector varchar(255), primary key (id))
2020-12-27 22:37:40,555 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table cursos (id  bigserial not null, fin date, horas int4, inicio date, nombre varchar(100) not null, primary key (id))
2020-12-27 22:37:40,562 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table empresa (id  bigserial not null, direccion varchar(60), email varchar(60), nombre varchar(60) not null, telefono varchar(11), url varchar(60), primary key (id))
2020-12-27 22:37:40,570 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table herramienta (id  bigserial not null, comentario varchar(80), nivel varchar(255), nombre varchar(80), tipo varchar(255), primary key (id))
2020-12-27 22:37:40,580 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto (id  bigserial not null, descripcion TEXT, fin date not null, inicio date not null, nombre varchar(79) not null, cliente_id int8, primary key (id))
2020-12-27 22:37:40,591 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table proyecto_herramienta (proyecto_id int8 not null, herramienta_id int8 not null)
2020-12-27 22:37:40,594 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table roles (id  bigserial not null, nombre varchar(20), primary key (id))
2020-12-27 22:37:40,602 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios (id  bigserial not null, acepta_emails boolean, apellidos varchar(255), cod_activacion varchar(80), cod_cambio_passw varchar(80), email varchar(255), enabled boolean, esperando_cambio_passw boolean, fecha_activado date, fecha_registro TIMESTAMP, fecha_sol_cambio_passw date, finalizada_activacion boolean not null, nombre varchar(255), password varchar(60) not null, telefono varchar(255), username varchar(60) not null, primary key (id))
2020-12-27 22:37:40,612 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] create table usuarios_roles (usuario_id int8 not null, role_id int8 not null)
2020-12-27 22:37:40,615 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table clientes add constraint UKteoa9ce3xv2ajahs0lgfoll2v unique (empresa, cliente, inicio)
2020-12-27 22:37:40,621 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table empresa add constraint UK_2fqlxbcs4h827hio1qam0dhd3 unique (nombre)
2020-12-27 22:37:40,625 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table herramienta add constraint UK_r2962ann3eaimg1plgafqssu1 unique (nombre)
2020-12-27 22:37:40,629 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint UK_gvu9yy8rcb4h2hr1f6av0f0ml unique (nombre)
2020-12-27 22:37:40,633 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint UKcabtkqf5f3h1o0ag4146m3fwm unique (proyecto_id, herramienta_id)
2020-12-27 22:37:40,637 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table roles add constraint UK_ldv0v52e0udsh2h1rs0r0gw1n unique (nombre)
2020-12-27 22:37:40,641 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_fe54wcy09qu2gqms03v5hvgf unique (cod_activacion)
2020-12-27 22:37:40,645 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_h0em1k5lbnom22yg59fc35728 unique (cod_cambio_passw)
2020-12-27 22:37:40,649 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios add constraint UK_m2dvbwfge291euvmk6vkkocao unique (username)
2020-12-27 22:37:40,653 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint UKqjaspm7473pnu9y4jxhrds8r2 unique (usuario_id, role_id)
2020-12-27 22:37:40,663 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto add constraint FK391t9hcdgfjcs6f7xf4khf1sp foreign key (cliente_id) references clientes
2020-12-27 22:37:40,672 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKq87ke7fdkv8d2yjc4ili8pg1t foreign key (herramienta_id) references herramienta
2020-12-27 22:37:40,678 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table proyecto_herramienta add constraint FKn0ya56kcb23nev3x5pxemuw76 foreign key (proyecto_id) references proyecto
2020-12-27 22:37:40,681 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKihom0uklpkfpffipxpoyf7b74 foreign key (role_id) references roles
2020-12-27 22:37:40,691 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] alter table usuarios_roles add constraint FKqcxu02bqipxpr7cjyj9dmhwec foreign key (usuario_id) references usuarios
2020-12-27 22:37:40,702 INFO org.hibernate.tool.schema.internal.exec.AbstractScriptSourceInput [restartedMain] HHH000476: Executing import script 'file:/C:/Proyectos/AngularSpring/restaurante/restaurante-back/target/classes/import.sql'
2020-12-27 22:37:40,703 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_USER')
2020-12-27 22:37:40,706 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO roles (nombre) VALUES ('ROLE_ADMIN')
2020-12-27 22:37:40,707 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] INSERT INTO empresa (nombre, direccion, telefono, url, email) VALUES('Cazuela Cortubí', 'C/Cazuela Cortubí 22, (Madrid)', '627336511','http://localhost:4200', 'info@fernandezLucena.es')
2020-12-27 22:37:40,714 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [restartedMain] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-12-27 22:37:40,724 INFO org.springframework.orm.jpa.AbstractEntityManagerFactoryBean [restartedMain] Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-12-27 22:37:40,756 INFO org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer [restartedMain] LiveReload server is running on port 35729
2020-12-27 22:37:41,454 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [restartedMain] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-12-27 22:37:42,212 INFO com.afl.restaurante.auth.SpringSecurityConfig [restartedMain] En BCryptPasswordEncoder
2020-12-27 22:37:42,714 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [restartedMain] select empresa0_.id as id1_2_0_, empresa0_.direccion as direccio2_2_0_, empresa0_.email as email3_2_0_, empresa0_.nombre as nombre4_2_0_, empresa0_.telefono as telefono5_2_0_, empresa0_.url as url6_2_0_ from empresa empresa0_ where empresa0_.id=?
2020-12-27 22:37:42,810 WARN org.thymeleaf.templatemode.TemplateMode [restartedMain] [THYMELEAF][restartedMain] Template Mode 'HTML5' is deprecated. Using Template Mode 'HTML' instead.
2020-12-27 22:37:42,881 WARN org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter [restartedMain] Unable to create an RSA verifier from verifierKey (ignoreable if using MAC)
2020-12-27 22:37:44,076 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: OrRequestMatcher [requestMatchers=[Ant [pattern='/oauth/token'], Ant [pattern='/oauth/token_key'], Ant [pattern='/oauth/check_token']]], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@14b6bf4, org.springframework.security.web.context.SecurityContextPersistenceFilter@bda328a, org.springframework.security.web.header.HeaderWriterFilter@5bf64f7f, org.springframework.security.web.authentication.logout.LogoutFilter@6124356c, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1380ba93, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@64688128, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@70c00893, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b98dcf3, org.springframework.security.web.session.SessionManagementFilter@140ce1e0, org.springframework.security.web.access.ExceptionTranslationFilter@4c2cbaa, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@48c67769]
2020-12-27 22:37:44,105 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfiguration$NotOAuthRequestMatcher@7b2faf93, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2301502d, org.springframework.security.web.context.SecurityContextPersistenceFilter@2a22be0, org.springframework.security.web.header.HeaderWriterFilter@5d8028f4, org.springframework.web.filter.CorsFilter@3b704393, org.springframework.security.web.authentication.logout.LogoutFilter@60fab67a, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@60a5758a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@571a927d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@b81d7e2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7b03c552, org.springframework.security.web.session.SessionManagementFilter@57c5e514, org.springframework.security.web.access.ExceptionTranslationFilter@380dac0d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5ae35a1d]
2020-12-27 22:37:44,125 INFO org.springframework.security.web.DefaultSecurityFilterChain [restartedMain] Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@678a4ed9, org.springframework.security.web.context.SecurityContextPersistenceFilter@49b85f4e, org.springframework.security.web.header.HeaderWriterFilter@54a34309, org.springframework.security.web.authentication.logout.LogoutFilter@3346779f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@11cf66c7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5f3ac4fc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3830b3a0, org.springframework.security.web.session.SessionManagementFilter@6ad1b064, org.springframework.security.web.access.ExceptionTranslationFilter@6c169721, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@101b8c02]
2020-12-27 22:37:44,284 INFO org.apache.juli.logging.DirectJDKLog [restartedMain] Starting ProtocolHandler ["http-nio-8080"]
2020-12-27 22:37:44,315 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [restartedMain] Tomcat started on port(s): 8080 (http) with context path ''
2020-12-27 22:37:44,317 INFO org.springframework.boot.StartupInfoLogger [restartedMain] Started BootAppRestaurante in 11.443 seconds (JVM running for 12.357)
2020-12-27 22:38:17,468 INFO org.apache.juli.logging.DirectJDKLog [http-nio-8080-exec-1] Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-12-27 22:38:17,468 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Initializing Servlet 'dispatcherServlet'
2020-12-27 22:38:17,482 INFO org.springframework.web.servlet.FrameworkServlet [http-nio-8080-exec-1] Completed initialization in 13 ms
2020-12-27 22:38:17,969 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] select usuario0_.id as col_0_0_ from usuarios usuario0_ where usuario0_.username=? limit ?
2020-12-27 22:38:18,057 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] insert into usuarios (acepta_emails, apellidos, cod_activacion, cod_cambio_passw, email, enabled, esperando_cambio_passw, fecha_activado, fecha_registro, fecha_sol_cambio_passw, finalizada_activacion, nombre, password, telefono, username) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2020-12-27 22:38:18,105 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-3] insert into usuarios_roles (usuario_id, role_id) values (?, ?)
2020-12-27 22:38:38,062 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] select usuario0_.id as id1_7_, usuario0_.acepta_emails as acepta_e2_7_, usuario0_.apellidos as apellido3_7_, usuario0_.cod_activacion as cod_acti4_7_, usuario0_.cod_cambio_passw as cod_camb5_7_, usuario0_.email as email6_7_, usuario0_.enabled as enabled7_7_, usuario0_.esperando_cambio_passw as esperand8_7_, usuario0_.fecha_activado as fecha_ac9_7_, usuario0_.fecha_registro as fecha_r10_7_, usuario0_.fecha_sol_cambio_passw as fecha_s11_7_, usuario0_.finalizada_activacion as finaliz12_7_, usuario0_.nombre as nombre13_7_, usuario0_.password as passwor14_7_, usuario0_.telefono as telefon15_7_, usuario0_.username as usernam16_7_ from usuarios usuario0_ where usuario0_.cod_activacion=?
2020-12-27 22:38:38,106 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-2] update usuarios set acepta_emails=?, apellidos=?, cod_activacion=?, cod_cambio_passw=?, email=?, enabled=?, esperando_cambio_passw=?, fecha_activado=?, fecha_registro=?, fecha_sol_cambio_passw=?, finalizada_activacion=?, nombre=?, password=?, telefono=?, username=? where id=?
2020-12-27 22:38:38,110 DEBUG com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-2] [usuario activadoo, ok]
2020-12-27 22:38:38,226 INFO com.afl.restaurante.controllers.UsuarioControlerMvc [http-nio-8080-exec-4] parametro de entrada messageKey = Optional[message.accountVerified]
2020-12-27 22:39:15,921 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] select usuario0_.id as id1_7_, usuario0_.acepta_emails as acepta_e2_7_, usuario0_.apellidos as apellido3_7_, usuario0_.cod_activacion as cod_acti4_7_, usuario0_.cod_cambio_passw as cod_camb5_7_, usuario0_.email as email6_7_, usuario0_.enabled as enabled7_7_, usuario0_.esperando_cambio_passw as esperand8_7_, usuario0_.fecha_activado as fecha_ac9_7_, usuario0_.fecha_registro as fecha_r10_7_, usuario0_.fecha_sol_cambio_passw as fecha_s11_7_, usuario0_.finalizada_activacion as finaliz12_7_, usuario0_.nombre as nombre13_7_, usuario0_.password as passwor14_7_, usuario0_.telefono as telefon15_7_, usuario0_.username as usernam16_7_ from usuarios usuario0_ where usuario0_.username=?
2020-12-27 22:39:15,929 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] select roles0_.usuario_id as usuario_1_8_0_, roles0_.role_id as role_id2_8_0_, role1_.id as id1_6_1_, role1_.nombre as nombre2_6_1_ from usuarios_roles roles0_ inner join roles role1_ on roles0_.role_id=role1_.id where roles0_.usuario_id=?
2020-12-27 22:39:15,934 INFO com.afl.restaurante.services.UsuarioService [http-nio-8080-exec-7] Role:ROLE_USER
2020-12-27 22:39:16,121 DEBUG org.hibernate.engine.jdbc.spi.SqlStatementLogger [http-nio-8080-exec-7] select usuario0_.id as id1_7_, usuario0_.acepta_emails as acepta_e2_7_, usuario0_.apellidos as apellido3_7_, usuario0_.cod_activacion as cod_acti4_7_, usuario0_.cod_cambio_passw as cod_camb5_7_, usuario0_.email as email6_7_, usuario0_.enabled as enabled7_7_, usuario0_.esperando_cambio_passw as esperand8_7_, usuario0_.fecha_activado as fecha_ac9_7_, usuario0_.fecha_registro as fecha_r10_7_, usuario0_.fecha_sol_cambio_passw as fecha_s11_7_, usuario0_.finalizada_activacion as finaliz12_7_, usuario0_.nombre as nombre13_7_, usuario0_.password as passwor14_7_, usuario0_.telefono as telefon15_7_, usuario0_.username as usernam16_7_ from usuarios usuario0_ where usuario0_.username=?
